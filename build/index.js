(()=>{"use strict";const e=window.React,t=window.wp.i18n,a=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.components,i=JSON.parse('{"UU":"img-lb-block-for-gutenberg/img-lb"}'),m=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50"},(0,e.createElement)("path",{d:"M 7 4 C 5.3545455 4 4 5.3545455 4 7 L 4 43 C 4 44.645455 5.3545455 46 7 46 L 43 46 C 44.645455 46 46 44.645455 46 43 L 46 7 C 46 5.3545455 44.645455 4 43 4 L 7 4 z M 7 6 L 43 6 C 43.554545 6 44 6.4454545 44 7 L 44 43 C 44 43.554545 43.554545 44 43 44 L 7 44 C 6.4454545 44 6 43.554545 6 43 L 6 7 C 6 6.4454545 6.4454545 6 7 6 z M 22.5 13 C 17.26514 13 13 17.26514 13 22.5 C 13 27.73486 17.26514 32 22.5 32 C 24.758219 32 26.832076 31.201761 28.464844 29.878906 L 36.292969 37.707031 L 37.707031 36.292969 L 29.878906 28.464844 C 31.201761 26.832076 32 24.758219 32 22.5 C 32 17.26514 27.73486 13 22.5 13 z M 22.5 15 C 26.65398 15 30 18.34602 30 22.5 C 30 26.65398 26.65398 30 22.5 30 C 18.34602 30 15 26.65398 15 22.5 C 15 18.34602 18.34602 15 22.5 15 z"}));(0,a.registerBlockType)(i.UU,{icon:m,attributes:{blockId:{type:"string",default:""},EnableLightbox:{type:"boolean",default:!1},Image:{type:"object",default:{imgUrl:"",altText:"Image",width:1400,height:638,aspectRatio:null}}},edit:function({attributes:a,setAttributes:i,clientId:m}){i({blockId:m});const o=e=>{const{url:t,title:a,width:l,height:n}=e,m=l/n;let o=l||1400,r=n||Math.round(o/m);o>1400&&(o=1400,r=Math.round(o/m)),i({Image:{imgUrl:t,altText:a,width:o,height:r,aspectRatio:m}})},r=(e,t)=>{const l=a.Image.aspectRatio||1,n=parseInt(t);i("width"===e?{Image:{...a.Image,width:n,height:Math.round(n/l)}}:{Image:{...a.Image,height:n,width:Math.round(n*l)}})},g=(0,l.useBlockProps)({className:"relative inline-block",style:{width:a.Image.imgUrl?`${a.Image.width}px`:"auto",maxWidth:"100%"}});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(n.Panel,{header:(0,t.__)("Setting","pxd")},(0,e.createElement)(React.Fragment,{key:".0"},(0,e.createElement)(n.PanelBody,{className:"pxd-head",title:(0,t.__)("General","pxd")},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)(n.CheckboxControl,{label:(0,t.__)("Enable Lightbox","pxd"),checked:a.EnableLightbox,onChange:e=>i({EnableLightbox:e})})),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{className:"components-base-control"},(0,e.createElement)("label",{className:"components-base-control__label"},"Image Width (px)"),(0,e.createElement)("input",{type:"number",value:a.Image.width||1400,onChange:e=>r("width",e.target.value),min:"1"}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{className:"components-base-control"},(0,e.createElement)("label",{className:"components-base-control__label"},"Image Height (px)"),(0,e.createElement)("input",{type:"number",value:a.Image.height||638,onChange:e=>r("height",e.target.value),min:"1"}))))))),(0,e.createElement)("div",{...g},!a.Image.imgUrl&&(0,e.createElement)("div",{className:"upload-prompt",style:{width:"300px",height:"200px",border:"2px dashed #ccc",display:"flex",justifyContent:"center",alignItems:"center",background:"#f7f7f7"}},(0,e.createElement)(l.MediaUpload,{onSelect:o,allowedTypes:"image",render:({open:a})=>(0,e.createElement)(n.Button,{isPressed:!0,onClick:a,variant:"primary"},(0,t.__)("Add/Update Image","pxd"))})),a.Image.imgUrl&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.MediaUpload,{onSelect:o,allowedTypes:"image",render:({open:a})=>(0,e.createElement)(n.Button,{onClick:()=>i({Image:{imgUrl:"",altText:""}}),variant:"primary",className:"remove-button",style:{position:"absolute",background:"red",top:"10px",left:"10px",zIndex:1}},(0,t.__)("Remove Image","pxd"))}),(0,e.createElement)("img",{src:a.Image.imgUrl,className:"img-lb-img-tag richtext-border",style:{width:`${a.Image.width}px`,height:`${a.Image.height}px`,display:"block"},alt:a.Image.altText||(0,t.__)("Image","pxd")}))))},save:function({attributes:t}){const a=l.useBlockProps.save({className:`section-${t.blockId} inline-block`,style:{width:t.Image.imgUrl?`${t.Image.width}px`:"auto",maxWidth:"100%"}});return(0,e.createElement)("div",{...a},t.Image?.imgUrl&&(0,e.createElement)("div",{className:t.EnableLightbox?"img-lb-custom-popup-container":"",id:t.EnableLightbox?`popup-${t.blockId}`:""},t.EnableLightbox?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{src:t.Image.imgUrl,className:"img-lb-popup-trigger img-lb-img-tag img-lb-cursor-zoom-in",style:{width:`${t.Image.width}px`,height:`${t.Image.height}px`,display:"block"},alt:t.Image.altText,"data-popup":`popup-${t.blockId}`}),(0,e.createElement)("div",{className:"img-lb-popup-overlay"},(0,e.createElement)("div",{className:"img-lb-popup-content"},(0,e.createElement)("span",{className:"img-lb-popup-close"},"Ã—"),(0,e.createElement)("img",{src:t.Image.imgUrl,alt:t.Image.altText,className:"img-lb-popup-image"})))):(0,e.createElement)("img",{src:t.Image.imgUrl,className:"img-lb-img-tag",style:{width:`${t.Image.width}px`,height:`${t.Image.height}px`,display:"block"},alt:t.Image.altText})))}})})();